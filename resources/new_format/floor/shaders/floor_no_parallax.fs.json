"precision mediump float;\nuniform sampler2D diffuseMap;\nuniform sampler2D normalMap;\nuniform sampler2D displaceMap;\nuniform samplerCube cubeMap;\nuniform vec4 materialAmbient;\nuniform vec4 materialDiffuse;\n\nvarying vec2 texCoord0;\nvarying vec3 eyeVec;\nvarying vec3 lightVec;\nvarying mat3 TBN;\nvarying mat3 TBNi;\n\nvoid main(void)\n{\n vec3 tangentSpaceToEye = TBNi * -eyeVec;\n vec2 newCoords = texCoord0;\n\n vec4 texColor = texture2D(diffuseMap, newCoords);\n vec3 bump = texture2D(normalMap, newCoords).rgb * 2.0 - 1.0;\n\n vec3 normal = TBN * bump;\n float NdotL = dot(normal, normalize(lightVec));\n\n float diffuse = max(NdotL, 0.0 );\n vec4 intensity = diffuse * materialDiffuse + materialAmbient;\n\n gl_FragColor = texColor * intensity;\n}"