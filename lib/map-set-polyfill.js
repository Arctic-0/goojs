// based on es6-collections by Andrea Giammarchi, @WebReflection
// Object.is shim from the MDN
(function(e){"use strict";function i(e,t){function r(e){if(!this||this.constructor!==r)return new r(e);this._keys=[];this._values=[];this.objectOnly=t;if(e)s.call(this,e)}if(!t){n(e,"size",{get:m})}e.constructor=r;r.prototype=e;return r}function s(e){if(this.add)e.forEach(this.add,this);else e.forEach(function(e){this.set(e[0],e[1])},this)}function o(e){if(this.has(e)){this._keys.splice(t,1);this._values.splice(t,1)}return-1<t}function u(e){return this.has(e)?this._values[t]:undefined}function a(e,n){if(this.objectOnly&&n!==Object(n))throw new TypeError("Invalid value used as weak collection key");if(n!=n||n===0)for(t=e.length;t--&&!r(e[t],n););else t=e.indexOf(n);return-1<t}function f(e){return a.call(this,this._values,e)}function l(e){return a.call(this,this._keys,e)}function c(e,n){this.has(e)?this._values[t]=n:this._values[this._keys.push(e)-1]=n;return this}function h(e){if(!this.has(e))this._values.push(e);return this}function p(){this._values.length=0}function d(){return this._values.slice()}function v(){return this._keys.slice()}function m(){return this._values.length}function g(e,t){var n=this;var r=n._values.slice();n._keys.slice().forEach(function(i,s){e.call(t,r[s],i,n)})}function y(e,t){var n=this;n._values.slice().forEach(function(r){e.call(t,r,r,n)})}if(!Object.is){Object.is=function(e,t){if(e===0&&t===0){return 1/e===1/t}if(e!==e){return t!==t}return e===t}}var t;var n=Object.defineProperty,r=Object.is;if(typeof e.Set==="undefined"){e.Map=i({"delete":o,has:l,get:u,set:c,keys:v,values:d,forEach:g,clear:p});e.Set=i({has:f,add:h,"delete":o,clear:p,values:d,forEach:y})}})(window)