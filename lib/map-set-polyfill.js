// based on es6-collections by Andrea Giammarchi, @WebReflection
// Object.is shim from the MDN
(function(e){"use strict";function o(e,t){function r(e){if(!this||this.constructor!==r)return new r(e);this._keys=[];this._values=[];this.objectOnly=t;if(e)u.call(this,e)}if(!t){n(e,"size",{get:y})}e.constructor=r;r.prototype=e;return r}function u(e){if(this.add)e.forEach(this.add,this);else e.forEach(function(e){this.set(e[0],e[1])},this)}function a(e){if(this.has(e)){this._keys.splice(t,1);this._values.splice(t,1)}return-1<t}function f(e){return this.has(e)?this._values[t]:undefined}function l(e,n){if(this.objectOnly&&n!==Object(n))throw new TypeError("Invalid value used as weak collection key");if(n!=n||n===0)for(t=e.length;t--&&!r(e[t],n););else t=e.indexOf(n);return-1<t}function c(e){return l.call(this,this._values,e)}function h(e){return l.call(this,this._keys,e)}function p(e,n){this.has(e)?this._values[t]=n:this._values[this._keys.push(e)-1]=n;return this}function d(e){if(!this.has(e))this._values.push(e);return this}function v(){this._values.length=0}function m(){return this._values.slice()}function g(){return this._keys.slice()}function y(){return this._values.length}function b(e,t){var n=this;var r=n._values.slice();n._keys.slice().forEach(function(i,s){e.call(t,r[s],i,n)})}function w(e,t){var n=this;n._values.slice().forEach(function(r){e.call(t,r,r,n)})}if(!Object.is){Object.is=function(e,t){if(e===0&&t===0){return 1/e===1/t}if(e!==e){return t!==t}return e===t}}var t;var n=Object.defineProperty,r=Object.is;var i=true;try{new Set([1,2,3]);new Map([[]])}catch(s){i=false}if(!i){e.Map=o({"delete":a,has:h,get:f,set:p,keys:g,values:m,forEach:b,clear:v});e.Set=o({has:c,add:d,"delete":a,clear:v,values:m,forEach:w})}})(window)