<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Particle Editor</title>
    <!-- jQuery UI style -->
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/themes/dark-hive/jquery-ui.css" />

	<!-- Our own overriding styles -->
    <link rel="stylesheet" href="particle_editor.css" />

    <!-- jQuery and jQuery UI from Google CDN -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js"></script>
    
    <!-- JSRender lib for string templates -->
    <script src="../examples-lib/jsrender.js"></script>
    
    <!-- Color Picker plugin -->
    <link href="../examples-lib/colorpicker/jquery.colorpicker.css" rel="stylesheet" type="text/css"/>
    <script src="../examples-lib/colorpicker/jquery.colorpicker.js"></script>
    
    <!-- Actual example logic -->
    <script data-main="particle_editor" src="../lib/require.js"></script>
    
    <script type="text/javascript">
    $(function() {
        // default object setup
        $('#particle_components').accordion({
            heightStyle : "fill",
            collapsible : true
        });
        $('#add_particle_component').button();
    });
    </script>
</head>

<body>
    <div id="config">
        <div style="text-align: center;"><button id="add_particle_component" class="add_button">+ Add Particle Entity</button>&nbsp;<span id="change_bgcolor_button"></span></div>
        <div id="particle_components"></div>
    </div>

    <!-- hidden file chooser used for editor -->
    <input type="file" id="fileChooser" class="hidden_input">
    <img id="imgRecycler" class="hidden_input">

    <!-- template editor form for a particle component -->
    <script id="component_editor_template" type="text/x-jsrender">
        <h3>{{>title}}<span class="delete_button">delete</span></h3>
        <div>
	        <table class="component_properties editor" cellpadding="0" cellspacing="0" border="0">
                <tr>
                <td class="label" colspan="2">Enabled: <input type="checkbox" class="particle_enabled" name="{{attr:name}}" min="0" step="1" max="64" checked="{{attr:enabled}}"></td>
                </tr>

	            <tr>
                <td class="label" width="50%">Total Particles:</td>
                <td class="label" width="50%">Texture:</td>
                </tr>

                <tr>
                <td class="input"><input type="number" class="particle_count" name="{{attr:name}}" min="0" step="10" max="16383" value="{{attr:count}}"></td>
                <td class="input"><img src='../resources/particle_atlas.png' class="particle_texture" name="{{attr:name}}"></td>
                </tr>
	
                <tr>
                <td class="label">Blending:</td>
                <td class="label">Atlas X/Y:</td>
                </tr>

                <tr>
                <td class="input">
                    <select class="particle_blending" name="{{attr:name}}">
                        <option value="AlphaBlending" selected>Alpha</option>
                        <option value="AdditiveBlending">Additive</option>
                        <option value="SubtractiveBlending">Subtractive</option>
                        <option value="MultiplyBlending">Multiply</option>
                        <option value="NoBlending">None</option>
                </select></td>
                <td class="input"><span class="atlas">
                <input type="number" class="particle_atlasX" name="{{attr:name}}" min="0" step="1" max="64" value="{{attr:atlasX}}">
                <input type="number" class="particle_atlasY" name="{{attr:name}}" min="0" step="1" max="64" value="{{attr:atlasY}}">
                </span></td>
                </tr>
	        </table>
            <div class="emitters"></div>
            <div style="text-align: right;"><button id="add_emitter" class="add_button">+ Add Emitter</button></div>
        </div>
    </script>

    <!-- template editor form for a particle component -->
    <script id="emitter_editor_template" type="text/x-jsrender">
        <div>
        <h3>Emitter<span class="delete_button">delete</span></h3>
        <div class="emitter_properties">
            <ul>
                <li><a href="#emit-tab1-{{attr:index}}_{{attr:ent}}">General</a></li>
                <li><a href="#emit-tab2-{{attr:index}}_{{attr:ent}}">Functions</a></li>
                <li><a href="#emit-tab3-{{attr:index}}_{{attr:ent}}">Timeline</a></li>
                <li><a href="#emit-tab4-{{attr:index}}_{{attr:ent}}">Influences</a></li>
            </ul>
            <div id="emit-tab1-{{attr:index}}_{{attr:ent}}">
                <table cellpadding="0" cellspacing="0" border="0" class="editor">
                    <tr>
                    <td class="label" colspan="2">Enabled: <input type="checkbox" class="emitter_enabled" min="0" step="1" max="64" checked="{{attr:enabled}}"></td>
                    </tr>

                    <tr>
                    <td class="label" width="50%">Max Life (ms):</td>
                    <td class="label" width="50%">Release Rate / sec:</td>
                    </tr>
        
                    <tr>
                    <td class="input"><input type="number" class="max_life" min="50" max="99999" step="25" value="{{attr:maxLifetime * 1000}}"></td>
                    <td class="input"><input type="number" class="release_rate" min="0" max="999" step="1"  value="{{attr:releaseRatePerSecond}}"></td>
                    </tr>

                    <tr>
                    <td class="label">Min Life (ms):</td>
                    <td class="label">Max Spawn:</td>
                    </tr>
        
                    <tr>
                    <td class="input"><input type="number" class="min_life" min="50" max="99999" step="25" value="{{attr:minLifetime * 1000}}"></td>
                    <td class="input"><input type="text" class="max_spawn" size="5" value="{{attr:totalParticlesToSpawn}}"></td>
                    </tr>

                    <tr>
                    <td class="label">Billboard:</td>
                    </tr>
        
                    <tr>
                    <td class="input">
                    <label><input type="radio" class="billboard" name="{{attr:uuid}}" value="camera" checked="checked"> Camera</label><br/>
                    <label><input type="radio" class="billboard" name="{{attr:uuid}}" value="xz"> XZ Plane</label><br/>
                    <label title="Set emit_bbX and emit_bbY on Particle in functions tab."><input type="radio" class="billboard" name="{{attr:uuid}}" value="particle"> Particle Vars</label>
                    </td>
                    <td class="input">
                    <label><input type="radio" class="billboard" name="{{attr:uuid}}" value="xy"> XY Plane</label><br/>
                    <label><input type="radio" class="billboard" name="{{attr:uuid}}" value="yz"> YZ Plane</label>
                    </td>
                    </tr>
                </table>
            </div>
            <div id="emit-tab2-{{attr:index}}_{{attr:ent}}">
                <table cellpadding="0" cellspacing="0" border="0" class="editor">
                    <tr>
                    <td class="label">
                        <span>getEmissionPoint:</span>
                        <span class="function_examples">Examples: 
                        <select class="emission_point_examples" name="{{attr:name}}">
                            <option value="Point" selected>Point</option>
                            <option value="Rectangle">Rectangle</option>
                            <option value="GOO!">GOO!</option>
                            <option value="Cube">Cube</option>
                            <option value="HollowCube">Hollow Cube</option>
                            <option value="Sphere">Sphere</option>
                            <option value="HollowSphere">Hollow Sphere</option>
                        </select></span>
                    </td>
                    </tr>
        
                    <tr>
                    <td class="input"><textarea class="textarea emission_point" id="{{attr:index}}">particle.position.set(0,0,0);</textarea></td>
                    </tr>

                    <tr><td>&nbsp</td></tr>

                    <tr>
                    <td class="label">
                        <span>getEmissionVelocity:</span>
                        <span class="function_examples">Examples: 
                        <select class="emission_velocity_examples" name="{{attr:name}}">
                            <option value="Simple" selected>Simple Velocity</option>
                            <option value="Fountain">Fountain</option>
                            <option value="Flame">Flame</option>
                            <option value="Random">Random Velocity</option>
                            <option value="Drift">Drift</option>
                            <option value="GroundFog">Ground Fog</option>
                            <option value="Rain">Rain</option>
                            <option value="None">Stationary</option>
                        </select></span>
                    </td>
                    </tr>
        
                    <tr>
                    <td class="input"><textarea class="textarea emission_velocity" id="{{attr:index}}">particle.velocity.set(0,1,0);</textarea></td>
                    </tr>
                </table>
            </div>
            <div id="emit-tab3-{{attr:index}}_{{attr:ent}}">
                <div class="timeline"></div>
                <div style="text-align: right;"><button id="add_entry" class="add_button">+ Add Entry</button></div>
            </div>
            <div id="emit-tab4-{{attr:index}}_{{attr:ent}}">
                <p>(Sample only.  Much more complex influences possible.)</p>
                <table cellpadding="0" cellspacing="0" border="0" class="editor">
                    <tr>
                    <td class="label" width="50%">Gravity:</td>
                    </tr>
        
                    <tr>
                    <td class="input"><input type="number" class="gravity" name="{{attr:index}}" min="-500" max="500" step="0.1" value="0"></td>
                    </tr>
                    </div>
                </table>
        </div>
        </div>
    </script>
    <!-- template editor form for a particle component -->
    <script id="timeline_editor_template" type="text/x-jsrender">
        <div>
        <h3>Entry<span class="delete_button">delete</span></h3>
        <div>
	        <table cellpadding="0" cellspacing="0" border="0" class="editor">
	            <tr>
	            <td class="label" width="50%">Life Offset (%):</td>
	            <td class="label" width="50%">Size:</td>
	            </tr>
	
	            <tr>
	            <td class="input"><input type="number" class="timeOffset" min="0.01" max="1.00" step="0.01" value="{{attr:timeOffset}}"></td>
	            <td class="input"><input type="number" class="size" min="0" max="500" step="0.1"  value="{{attr:size}}"></td>
	            </tr>

                <tr>
                <td class="label">Mass:</td>
                <td class="label">Spin:</td>
                </tr>
    
                <tr>
                <td class="input"><input type="number" class="mass" min="0" max="100" step="1" value="{{attr:mass}}"></td>
                <td class="input"><input type="number" class="spin" min="0" max="360" step="1"  value="{{attr:spin}}"></td>
                </tr>

                <tr>
                <td class="label" colspan="2">Atlas UV index:</td>
                </tr>
    
                <tr>
                <td class="input" colspan="2"><input type="number" class="uvIndex" min="0" max="100" step="1" value="{{attr:uvIndex}}"></td>
                </tr>

                <tr>
                <td class="label" colspan="2">Color:</td>
                </tr>
    
                <tr>
                <td class="input" colspan="2"><input type="text" class="color" value="{{attr:color}}"></td>
                </tr>
	        </table>
        </div>
        </div>
    </script>
</body>
</html>